<div class="container">
  <h2>Create Job Application Form</h2>
</div>

<form [formGroup]="resumeForm" (ngSubmit)="onSubmit()" class="container mt-4">
  <!-- Basic Details -->
  <fieldset formGroupName="basicDetails" class="mb-4">
    <legend>Basic Details</legend>
    <div class="row">
      <div class="col-md-6">
        <label for="name">Name:</label>
        <input id="name" formControlName="name" class="form-control" />
      </div>
      <div class="col-md-6">
        <label for="email">Email:</label>
        <input id="email" formControlName="email" class="form-control" />
      </div>
    </div>
    <div class="row mt-2">
      <div class="col-md-6">
        <label for="address">Address:</label>
        <input id="address" formControlName="address" class="form-control" />
      </div>
      <div class="col-md-3">
        <label for="gender">Gender:</label>
        <select id="gender" formControlName="gender" class="form-control">
          <option value="">Select Gender</option>
          <option value="male">Male</option>
          <option value="female">Female</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="contact">Contact:</label>
        <input id="contact" formControlName="contact" class="form-control" />
      </div>
    </div>
  </fieldset>

  <!-- Education Details -->
  <fieldset formArrayName="education" class="mb-4">
    <legend>Education Details</legend>
    <div
      *ngFor="let edu of education.controls; let i = index"
      [formGroupName]="i"
      class="mb-3 border p-3"
    >
      <div class="row">
        <div class="col-md-4">
          <label for="board-{{ i }}">Board/University:</label>
          <input
            id="board-{{ i }}"
            formControlName="board"
            class="form-control"
          />
        </div>
        <div class="col-md-4">
          <label for="year-{{ i }}">Year:</label>
          <input
            id="year-{{ i }}"
            formControlName="year"
            class="form-control"
          />
        </div>
        <div class="col-md-4">
          <label for="cgpa-{{ i }}">CGPA/Percentage:</label>
          <input
            id="cgpa-{{ i }}"
            formControlName="cgpa"
            class="form-control"
          />
        </div>
      </div>
      <!-- Remove button inside each education item -->
      <div class="mt-2">
        <button
          type="button"
          (click)="removeEducation(i)"
          class="btn btn-danger me-2"
        >
          Remove
        </button>
      </div>
    </div>

    <!-- Add More Education button outside the loop -->
    <div class="mt-3">
      <button type="button" (click)="addEducation()" class="btn btn-primary">
        Add More Education
      </button>
    </div>
  </fieldset>

  <!-- Work Experience -->
  <fieldset formArrayName="workExperience" class="mb-4">
    <legend>Work Experience</legend>
    <div
      *ngFor="let work of workExperience.controls; let i = index"
      [formGroupName]="i"
      class="mb-3 border p-3"
    >
      <div class="row">
        <div class="col-md-4">
          <label for="company-{{ i }}">Company:</label>
          <input
            id="company-{{ i }}"
            formControlName="company"
            class="form-control"
          />
        </div>
        <div class="col-md-4">
          <label for="designation-{{ i }}">Designation:</label>
          <input
            id="designation-{{ i }}"
            formControlName="designation"
            class="form-control"
          />
        </div>
        <div class="col-md-2">
          <label for="from-{{ i }}">From:</label>
          <input
            id="from-{{ i }}"
            type="date"
            formControlName="from"
            class="form-control"
          />
        </div>
        <div class="col-md-2">
          <label for="to-{{ i }}">To:</label>
          <input
            id="to-{{ i }}"
            type="date"
            formControlName="to"
            class="form-control"
          />
        </div>
      </div>
      <div class="mt-2">
        <button
          type="button"
          (click)="removeWorkExperience(i)"
          class="btn btn-danger me-2"
        >
          Remove
        </button>
        <!-- <button
          type="button"
          (click)="addWorkExperience()"
          class="btn btn-primary"
        >
          Add More Work Experience
        </button> -->
      </div>
    </div>
    <div class="mt-3">
      <button
        type="button"
        (click)="addWorkExperience()"
        class="btn btn-primary"
      >
        Add More Work Experience
      </button>
    </div>
    <!-- </fieldset> -->
  </fieldset>

  <!--Technical Experience-->
  <fieldset formArrayName="technicalExperience" class="mb-4">
    <legend>Technical Experience</legend>
    <div
      *ngFor="let tech of technicalExperience.controls; let i = index"
      [formGroupName]="i"
      class="mb-3 border p-3"
    >
      <div class="row">
        <div class="col-md-6">
          <label for="technology-{{ i }}">Technology:</label>
          <input
            id="technology-{{ i }}"
            formControlName="technology"
            class="form-control"
          />
        </div>
        <div class="col-md-6">
          <label>Proficiency:</label>
          <div class="form-check">
            <input
              type="radio"
              id="beginner-{{ i }}"
              formControlName="proficiency"
              value="Beginner"
              class="form-check-input"
            />
            <label for="beginner-{{ i }}" class="form-check-label">
              Beginner
            </label>

            <input
              type="radio"
              id="mediator-{{ i }}"
              formControlName="proficiency"
              value="Mediator"
              class="form-check-input"
            />
            <label for="mediator-{{ i }}" class="form-check-label">
              Mediator
            </label>

            <input
              type="radio"
              id="expert-{{ i }}"
              formControlName="proficiency"
              value="Expert"
              class="form-check-input"
            />
            <label for="expert-{{ i }}" class="form-check-label">
              Expert
            </label>
          </div>
        </div>
      </div>
      <div class="mt-2">
        <button
          type="button"
          (click)="removeTechnicalExperience(i)"
          class="btn btn-danger me-2"
        >
          Remove
        </button>
      </div>
    </div>
    <div class="mt-3">
      <button
        type="button"
        (click)="addTechnicalExperience()"
        class="btn btn-primary"
      >
        Add Technical Experience
      </button>
    </div>
  </fieldset>

  <!--Known Languages-->
  <fieldset class="mb-4">
    <legend>Known Languages</legend>
    <div *ngFor="let language of languages" class="mb-3 border p-3">
      <label>{{ language }}</label>
      <div class="form-check form-check-inline">
        <input
          type="checkbox"
          id="{{ language }}-read"
          class="form-check-input"
          (change)="onLanguageChange(language, 'read')"
          [checked]="languagesControl.get(language)?.get('read')?.value"
        />
        <label class="form-check-label" for="{{ language }}-read">Read</label>
      </div>
      <div class="form-check form-check-inline">
        <input
          type="checkbox"
          id="{{ language }}-write"
          class="form-check-input"
          (change)="onLanguageChange(language, 'write')"
          [checked]="languagesControl.get(language)?.get('write')?.value"
        />
        <label class="form-check-label" for="{{ language }}-write">Write</label>
      </div>
      <div class="form-check form-check-inline">
        <input
          type="checkbox"
          id="{{ language }}-speak"
          class="form-check-input"
          (change)="onLanguageChange(language, 'speak')"
          [checked]="languagesControl.get(language)?.get('speak')?.value"
        />
        <label class="form-check-label" for="{{ language }}-speak">Speak</label>
      </div>
    </div>
  </fieldset>

  <!-- Preferences Section -->
  <fieldset formGroupName="preferences" class="mb-4">
    <legend>Preferences</legend>
    <div class="row">
      <div class="col-md-6">
        <label for="preferredLocation">Preferred Location:</label>
        <select
          id="preferredLocation"
          formControlName="preferredLocation"
          class="form-control"
        >
          <option value="">Select Location</option>
          <option *ngFor="let location of locations" [value]="location">
            {{ location }}
          </option>
        </select>
      </div>
      <div class="col-md-3">
        <label for="expectedCTC">Expected CTC:</label>
        <input
          id="expectedCTC"
          formControlName="expectedCTC"
          type="number"
          class="form-control"
        />
      </div>
      <div class="col-md-3">
        <label for="currentCTC">Current CTC:</label>
        <input
          id="currentCTC"
          formControlName="currentCTC"
          type="number"
          class="form-control"
        />
      </div>
    </div>
    <div class="mt-2">
      <div class="row">
        <div class="col-md-6">
          <label for="noticePeriod">Notice Period:</label>
          <input
            id="noticePeriod"
            formControlName="noticePeriod"
            type="text"
            class="form-control"
          />
        </div>
      </div>
    </div>
  </fieldset>

  <button type="submit" class="btn btn-primary">Submit</button>
</form>
